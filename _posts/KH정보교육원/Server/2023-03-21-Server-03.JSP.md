---
title : 03. JSP
date : 2023-03-21 +09:00
categories : [KH í•™ì› ê³µë¶€, Server]
tags : [
  Server,
]
---
<!-- ![](/assets/img/Server/aaaa.png){:style="border:1px solid #eaeaea; border-radius: 7px; padding: 0px;" } -->
<!-- ![](/assets/img/Server/3-1.png){:style="width:1000px" } -->

### JSP ì‘ë‹µí•˜ê¸°

```html
âœ”ï¸ Dispatcher : í•„ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì == ë°œì†¡ì

âœ”ï¸ ìœ„ì„ : ë„˜ê²¨ì£¼ë‹¤

âœ”ï¸ forward : ë³´ë‚´ë‹¤, ì „ë‹¬í•˜ë‹¤, ì „ì†¡í•˜ë‹¤
- forwardëŠ” í˜ì´ì§€ ì´ë™ì´ ì•„ë‹Œ Servletì˜ ì—­í•  ì¤‘ ì‘ë‹µí™”ë©´ ì¶œë ¥ ì—­í• ì„ ë¶„ì—…í•œ JSPì—ê²Œ req, respë¥¼ ì „ë‹¬ë§Œ í•˜ëŠ” ê²ƒ 
  â¡ï¸ JSP ì‘ë‹µì„ ëŒ€ì‹  í•  ë¿ì´ë‹¤
  ê²°ë¡  : í˜ì´ì§€ ì´ë™ X â¡ï¸ ì£¼ì†Œì°½ì˜ ìš”ì²­ ì£¼ì†Œë„ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤

ğŸ’¡ ì‘ë‹µ í™”ë©´ì„ ë§Œë“œëŠ” Servletì˜ ì¼ì„ ì¢€ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” JSPì—ê²Œ ë„˜ê²¨ì¤„ ì˜ˆì •

âœ”ï¸ RequestDispatcher
- Servlet â†’ JSPë¡œ HttpServletRequest ê°ì²´, HttpServletResponse ê°ì²´ë¥¼ ë°œì†¡(ìœ„ì„)í•˜ëŠ” ì—­í• ì˜ ê°ì²´
  â¡ï¸ ì •í™•íˆëŠ” ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µí™”ë©´ì„ ë§Œë“¤ì–´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì¶œë ¥í•˜ëŠ” ì—­í• ì„ ìœ„ì„í•˜ëŠ” ê°ì²´

âœ”ï¸ req.getRequestDispatcher("JSP ê²½ë¡œ")
- HttpServletRequest ê°ì²´ê°€ ìƒì„±ë  ë•Œ ë‚´ë¶€ì— ìë™ìœ¼ë¡œ ìš”ì²­ì„ ìœ„ì„í•˜ëŠ” ê°ì²´(RequestDispatcher)ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ í¬í•¨í•˜ê³  ìˆìŒ

ğŸ’¡ JSP ê²½ë¡œ ì‘ì„± ê·œì¹™
- webapp í´ë” ê¸°ì¤€ìœ¼ë¡œ JSPíŒŒì¼ê¹Œì§€ì˜ ëª¨ë“  ê²½ë¡œ ì‘ì„±

âœ”ï¸ req.setAttribute(String key, Object value)
- JSPì—ê²Œ ì „ë‹¬ë  ì˜ˆì •ì¸ req ê°ì²´ì— result ë³€ìˆ˜ ê°’ ë‹´ì•„ì„œ ê°™ì´ ì „ë‹¬
- valueëŠ” ëª¨ë“  ê°ì²´(íƒ€ì„ ìƒê´€ ì—†ìŒ)
- Attribute : ì†ì„± == ë°ì´í„°(ê°’)
```

### **ë¡œê·¸ì¸ ë§Œë“¤ê¸°**

- 1) index.html
    
  ```html
  <form action="/JSPProject1/login" method="post">
    ID : <input type="text" name="inputId"> <br>
    PW : <input type="password" name="inputPw"> <br>
    
    <button>ë¡œê·¸ì¸</button>
  </form>
  ```
    
- 2) Servlet
  
  ```java
  @WebServlet("/login")
  public class LoginServlet extends HttpServlet {
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
  
      // post ë°©ì‹ ìš”ì²­ ë°ì´í„° ë¬¸ì ì¸ì½”ë”© ì²˜ë¦¬
      req.setCharaterEncoding("UTF-8");
      
      // ì „ë‹¬ë°›ì€ íŒŒë¼ë¯¸í„°(input íƒœê·¸ì˜ ê°’)ì„ ì–»ì–´ì™€ ë³€ìˆ˜ì— ì €ì¥
      // íŒŒë¼ë¯¸í„°ëŠ” ëª¨ë‘ String íƒ€ì…
      String id = req.getParameter("inputId");
      String pw = req.getParameter("inputPw");
      
      // íŒŒë¼ë¯¸í„° ì˜ ì–»ì–´ì™”ëŠ”ì§€ í™•ì¸
      System.out.println(id);
      System.out.println(pw);
      
      String result = null;
      
      if(id.equals("user01") && pw.equals("pass01!")) {
        result = "ë¡œê·¸ì¸ ì„±ê³µ";
      } else {
        result = "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜";
      }
      
      RequestDispatcher dispatcher = req.getRequestDispatcher("/WEB-INF/views/loginResult.jsp");
      
      req.setAttribute("r", result);
                // Objectë¡œ ì—…ìºìŠ¤íŒ… ë˜ì–´ìˆëŠ” ìƒíƒœ

      dispatcher.forward(req, resp);
    }
  }
  ```
    
- 3) JSP
    
  ```jsp
  <!-- HTML ì£¼ì„ : HTML íƒœê·¸, CSS ë“± HTML ìš”ì†Œë§Œ ì£¼ì„ ì²˜ë¦¬ ê°€ëŠ¥ -->
  
  <%-- JSP ì£¼ì„ : HTML ìš”ì†Œ + JSP ì „ìš© íƒœê·¸
        <% %>, <%= %>, <%@ %>, ${EL}, <c:if>JSTL</c:if> --%>
  
  <%--
  <%@ %> : ì§€ì‹œì(ì•Œë ¤ì£¼ê±°ë‚˜ ì§€ì‹œí•˜ëŠ” ì†ì„±ì„ ê¸°ì…)
  charset=UTF-8 : í˜„ì¬ ë¬¸ì„œë¥¼ í•´ì„í•  ë•Œ UTF-8 ì¸ì½”ë”©ì„ ì´ìš©í•´ì„œ í•´ì„ (í•´ì„ ë°©ë²• ì•ˆë‚´)
  pageEncoding="UTF-8" : í˜„ì¬ ë¬¸ì„œê°€ UTF-8 ì¸ì½”ë”©ìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆìŒ
                (ë¬¸ì„œê°€ ì‘ì„±ëœ í˜•ì‹ ì•ˆë‚´)
  
  <% %> : ìŠ¤í¬ë¦½í‹€ë¦¿(Scriptlet). JSPì—ì„œ ìë°” ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ì˜ì—­
    â¡ï¸ JSTL ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ì„œ íƒœê·¸ í˜•ì‹ ë³€ê²½
  
  <%= %> : í‘œí˜„ì‹(Expression). ìë°”ì½”ë“œì˜ ê°’ì„ HTML í˜•ì‹ìœ¼ë¡œ ì¶œë ¥
          (ìë°”ì˜ ê°’ì„ í™”ë©´ì— ë³´ì´ê²Œ í•¨)
  
  EL(Exprression Language, í‘œí˜„ ì–¸ì–´)ë¡œ ë³€ê²½
  --%>
  ```
    
  ```jsp
  <%@ page language="java" contentType="text/html; charset=UTF-8"
  pageEncoding="UTF-8" %>
  <!-- ìƒë‹¨ì— ê¼­ ì‘ì„± -->
  
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>ë¡œê·¸ì¸ ê²°ê³¼ í˜ì´ì§€</title>
    </head>
  
    <body>
      <h1>ë¡œê·¸ì¸ ê²°ê³¼</h1>
      
      <!-- jspì—ì„œ ìë°”ì½”ë“œì˜ ê°’ì„ ì¶œë ¥ -->
      <%= request.getParameter("inputId") %>
      
      <br>
      
      <%= request.getParameter("inputPw") %>
      
      <%= 2 * 5 + 10 %>
      <%
        // ìë°” ì£¼ì„ ê°€ëŠ¥
        // ì—¬ê¸°ëŠ” JSP - Servletìœ¼ë¡œ ë¶€í„° ì „ì†¡ ë°›ì€ req, respê°€ ìˆìŒ
        // - req, respë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
        // - ëŒ€ì‹  ì´ë¦„ì´ request, responseë¡œ ë°”ë€œ
        
        // request.getAttribute("key") - value(Object íƒ€ì…)
        
        String res = (String)request.getAttribute("r");
                      // ë‹¤ìš´ìºìŠ¤íŒ… í•„ìš”
      %>
  
      <!-- res ë³€ìˆ˜ì— ì €ì¥ëœ ê°’ì´ ì¶œë ¥ë¨ -->
      <h3 style='color:green'><%= res %></h3>
  
      <button type='button' onclick='history.back()'>ëŒì•„ê°€ê¸°</button>
    </body>
  </html>
  ```

  ![](/assets/img/Server/3-1.png){:style="width:1000px" }
  ![](/assets/img/Server/3-2.png){:style="width:1000px" }
  
### **í”¼ì ì£¼ë¬¸ ë§Œë“¤ê¸°**

- 1) index.html
    
  ```html
  <form action="/JSPProject1/pizzaOrder" method="post">
    <select name="pizza">
      <option>ì½¤ë¹„ë„¤ì´ì…˜ í”¼ì</option>
      <option>ë¶ˆê³ ê¸° í”¼ì</option>
      <option>ê³ êµ¬ë§ˆ í”¼ì</option>
      <option>í•˜ì™€ì´ì•ˆ í”¼ì</option>
      <option>í†µìƒˆìš° í”¼ì</option>
    </select>
    
    <br><br>
  
    ì‚¬ì´ì¦ˆ
    <br>
    <label>
      R <input type="radio" name="size" value="R">
    </label>
    <br>
    <label>
      L(+2,000) <input type="radio" name="size" value="L">
    </label>
    
    <br><br>
  
    ìˆ˜ëŸ‰ : <input type="number" name="amount" min="1" max="10" value="1">
  
    <br><br>
  
    <button>ì£¼ë¬¸í•˜ê¸°</button>
  </form>
  ```

  ![](/assets/img/Server/3-3.png){:style="width:1000px" }

- 2) Servlet
    
  ```java
  @WebServlet("/pizzaOrder")
  public class PizzaOrderServlet extends HttpServlet {
  
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
  
      req.setCharacterEncoding("UTF-8");
  
      String size = req.getParameter("size"); // R / L
  
      int amount = Integer.parseInt(req.getParameter("amount"));
      // Integer.parseInt(ë¬¸ìì—´) : ìˆ«ì í˜•íƒœ String -> int ë³€í™˜
  
      // (ê¸°ë³¸(10000) + ì‚¬ì´ì¦ˆ(0 or 2000)) * ìˆ˜ëŸ‰(1~10)
      int temp = 0;
  
      if(size.equals("L")) temp = 2000;
  
      // ìµœì¢… ê¸ˆì•¡
      int total = (10000 + temp) * amount;
  
      // JSP ìš”ì²­ ìœ„ì„ ê°ì²´ ìƒì„±(JSP ê²½ë¡œ ì§€ì •)
      RequestDispatcher dispatcher = req.getRequestDispatcher("/WEB-INF/views/orderResult.jsp");
  
      // reqì— total ê°’ ì„¸íŒ…
      req.setAttribute("tot",total);
  
      dispatcher.forward(req, resp);
    }
  }
  ```
    
- 3) JSP
  
  ```jsp
  <%@ page language = "java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
  
  <%
    int total = (int)request.getAttribute("tot");
    String pizza = request.getParameter("pizza");
    String size = request.getParameter("size");
    String amount = request.getParameter("amount");
  %>
  
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>ì£¼ë¬¸ ê²°ê³¼</title>
  
      <style>
        #container{
          width : 400px;
          border : 1px solid black;
          margin : auto;
        }
      </style>
    </head>
  
    <body>
      <div id='container'>
        ì£¼ë¬¸í•œ í”¼ì : <%= pizza %> <br>
  
        <% if(size.equals("L")){ %>
            Large
        <%} else { %>
          Regualr
        <% } %>
  
        <br>
  
        ìˆ˜ëŸ‰ : <%= amount %> íŒ
  
        <h4>ì´ í•©ê³„ : <%= total %></h4>
      </div>
    </body>
  </html>
  ```
  
  ![](/assets/img/Server/3-4.png){:style="width:1000px" }


### **íšŒì› ê°€ì… í˜ì´ì§€**

- 1) index.html
  
  ```html
  <h1>íšŒì› ê°€ì…(JSP ë²„ì „)</h1>
  <form action="/JSPProject1/signIn" method="post">
    <table>
      <tr>
        <th>ì•„ì´ë””</th>
        <td>
          <input type="text" name="inputId">
        </td>
      </tr>
  
      <tr>
        <th>ë¹„ë°€ë²ˆí˜¸</th>
        <td>
          <input type="password" name="inputPw">
        </td>
      </tr>
  
      <tr>
        <th>ë¹„ë°€ë²ˆí˜¸ í™•ì¸</th>
        <td>
          <input type="password" name="inputPw">
        </td>
      </tr>
  
      <tr>
        <th>ì´ë¦„</th>
        <td>
          <input type="text" name="inputName">
        </td>
      </tr>
  
      <tr>
        <th>ì´ë©”ì¼</th>
        <td>
          <input type="email" name="inputEmail">
        </td>
      </tr>
      
      <tr>
        <th rowspan="2">ì·¨ë¯¸</th>
        <td>
          ê³µë¶€ <input type="checkbox" name="hobby" value="ê³µë¶€">
          ê²Œì„ <input type="checkbox" name="hobby" value="ê²Œì„">
          í—¬ìŠ¤ <input type="checkbox" name="hobby" value="í—¬ìŠ¤">
        </td>
      </tr>
  
      <tr>
        <td>
          ë…ì„œ <input type="checkbox" name="hobby" value="ë…ì„œ">
          ì˜í™” <input type="checkbox" name="hobby" value="ì˜í™”">
          ì½”ë”© <input type="checkbox" name="hobby" value="ì½”ë”©">
        </td>
      </tr>
      
      <tr>
        <td colspan="2" style="text-align: center;">
          <button>íšŒì› ê°€ì…</button>
        </td>
      </tr>
    </table>
  </form>
  ```

  ![](/assets/img/Server/3-5.png){:style="width:1000px" }
  
    
- 2) Servlet
    
  ```java
  @WebServlet("/signIn")
  public class SignIn extends HttpServlet {
  
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
  
      req.setCharacterEncoding("UTF-8");
  
      RequestDispatcher dispatcher = req.getRequestDispatcher("/WEB-INF/views/signIn.jsp");
  
      dispatcher.forward(req, resp);
    }
  }
  ```
    
- 3) JSP
    
  ```jsp
  <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
  
  <%
      String id = request.getParameter("inputId");
      String pw[] = request.getParameterValues("inputPw");
      String name = request.getParameter("inputName");
      String email = request.getParameter("inputEmail");
      String hobby[] = request.getParameterValues("hobby");
  %>
  
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>íšŒì›ê°€ì… ê²°ê³¼</title>
    </head>
  
    <body>
      <%
        String hobbyResult = "";
        for(String temp : hobby){
        hobbyResult += temp + " ";
        }
      %>
      <% if(!pw[0].equals(pw[1])){ %>
        <h3>ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</h3>
      <% } else{ %>
        <ul>
          <li>ì•„ì´ë”” : <%= id %></li>
          <li>ë¹„ë°€ì „í˜¸ : <%= pw[0] %></li>
          <li>ì´ë¦„ : <%= name %></li>
          <li>ì´ë©”ì¼ : <%= email %></li>
          <li>ì·¨ë¯¸ : <%= hobbyResult %></li>
        </ul>
        <h3><%= name %>ë‹˜ì˜ íšŒì› ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</h3>
      <% } %>
    </body>
  </html>
  ```

  ![](/assets/img/Server/3-6.png){:style="width:1000px" }
